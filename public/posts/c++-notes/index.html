<!doctype html><html lang=en dir=auto><head><script src="/blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=blog/livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>C++ notes | cwHsueh</title>
<meta name=keywords content><meta name=description content='這篇文章主要是給自己看的，因此寫的方法是以自己看懂為主，一些自己已經會的東西就不會寫得太詳細。
Source Code to Machine Code
source code to machine code 分成四個步驟：

preprocessing

處理 #，例如 #include
把 header file 複製到當前的檔案裡面


compiling

turn code into assembly


assembling

turn assembly into machine code, 0s and 1s


linking

把不同檔案的 machine code 接在一起



雖然說有四個步驟，但是其實會把這四個步驟叫做 compiling。
Command Line Arguments
int main(int argc, char *argv[]){ 
}

int main(int argc, char **argv){
}
如果有一個 binary file 叫做 greet，並且在 terminal 輸入 ./greet Hello，此時 argc = 2, argv[0] = "./greet", argv[1] = "Hello"。
echo $? 會回傳來自 main funciton 的 int，也就是 error code。'><meta name=author content="cwHsueh"><link rel=canonical href=http://localhost:1313/blog/posts/c++-notes/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/blog/posts/c++-notes/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css integrity=sha384-zh0CIslj+VczCZtlzBcjt5ppRcsAmDnRem7ESsYwWwg3m/OaJ2l4x7YBZl9Kxxib crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js integrity=sha384-Rma6DA2IPUwhNxmrB/7S3Tno0YY7sFu9WSYMCuulLhIqYSGZ2gKCJWIqhBWqMQfh crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js integrity=sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><meta property="og:url" content="http://localhost:1313/blog/posts/c++-notes/"><meta property="og:site_name" content="cwHsueh"><meta property="og:title" content="C++ notes"><meta property="og:description" content='這篇文章主要是給自己看的，因此寫的方法是以自己看懂為主，一些自己已經會的東西就不會寫得太詳細。
Source Code to Machine Code source code to machine code 分成四個步驟：
preprocessing 處理 #，例如 #include 把 header file 複製到當前的檔案裡面 compiling turn code into assembly assembling turn assembly into machine code, 0s and 1s linking 把不同檔案的 machine code 接在一起 雖然說有四個步驟，但是其實會把這四個步驟叫做 compiling。
Command Line Arguments int main(int argc, char *argv[]){ } int main(int argc, char **argv){ } 如果有一個 binary file 叫做 greet，並且在 terminal 輸入 ./greet Hello，此時 argc = 2, argv[0] = "./greet", argv[1] = "Hello"。
echo $? 會回傳來自 main funciton 的 int，也就是 error code。'><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-25T20:00:00+08:00"><meta property="article:modified_time" content="2023-12-25T20:00:00+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="C++ notes"><meta name=twitter:description content='這篇文章主要是給自己看的，因此寫的方法是以自己看懂為主，一些自己已經會的東西就不會寫得太詳細。
Source Code to Machine Code
source code to machine code 分成四個步驟：

preprocessing

處理 #，例如 #include
把 header file 複製到當前的檔案裡面


compiling

turn code into assembly


assembling

turn assembly into machine code, 0s and 1s


linking

把不同檔案的 machine code 接在一起



雖然說有四個步驟，但是其實會把這四個步驟叫做 compiling。
Command Line Arguments
int main(int argc, char *argv[]){ 
}

int main(int argc, char **argv){
}
如果有一個 binary file 叫做 greet，並且在 terminal 輸入 ./greet Hello，此時 argc = 2, argv[0] = "./greet", argv[1] = "Hello"。
echo $? 會回傳來自 main funciton 的 int，也就是 error code。'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/blog/posts/"},{"@type":"ListItem","position":2,"name":"C++ notes","item":"http://localhost:1313/blog/posts/c++-notes/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"C++ notes","name":"C\u002b\u002b notes","description":"這篇文章主要是給自己看的，因此寫的方法是以自己看懂為主，一些自己已經會的東西就不會寫得太詳細。\nSource Code to Machine Code source code to machine code 分成四個步驟：\npreprocessing 處理 #，例如 #include 把 header file 複製到當前的檔案裡面 compiling turn code into assembly assembling turn assembly into machine code, 0s and 1s linking 把不同檔案的 machine code 接在一起 雖然說有四個步驟，但是其實會把這四個步驟叫做 compiling。\nCommand Line Arguments int main(int argc, char *argv[]){ } int main(int argc, char **argv){ } 如果有一個 binary file 叫做 greet，並且在 terminal 輸入 ./greet Hello，此時 argc = 2, argv[0] = \u0026quot;./greet\u0026quot;, argv[1] = \u0026quot;Hello\u0026quot;。\necho $? 會回傳來自 main funciton 的 int，也就是 error code。\n","keywords":[],"articleBody":"這篇文章主要是給自己看的，因此寫的方法是以自己看懂為主，一些自己已經會的東西就不會寫得太詳細。\nSource Code to Machine Code source code to machine code 分成四個步驟：\npreprocessing 處理 #，例如 #include 把 header file 複製到當前的檔案裡面 compiling turn code into assembly assembling turn assembly into machine code, 0s and 1s linking 把不同檔案的 machine code 接在一起 雖然說有四個步驟，但是其實會把這四個步驟叫做 compiling。\nCommand Line Arguments int main(int argc, char *argv[]){ } int main(int argc, char **argv){ } 如果有一個 binary file 叫做 greet，並且在 terminal 輸入 ./greet Hello，此時 argc = 2, argv[0] = \"./greet\", argv[1] = \"Hello\"。\necho $? 會回傳來自 main funciton 的 int，也就是 error code。\nThe Cherno C++ series static https://youtu.be/f3FVU-iwNuA\nhttps://youtu.be/V-BFlMrBtqQ\n// static.cpp static int s_variable = 1;; // main.cpp #include int s_variable = 3; int main(){ std::cout \u003c\u003c s_variable \u003c\u003c std::endl; // 3 return 0; } static.cpp 中的 s_variable 只能被 static.cpp 中的東西看到，所以並不會有 linking error。\n在命名 global variable 的時候要很小心，因為一旦命名，其他所有的檔案就不能有此變數，不然就要加上 static。\n而 static 在 class 中則像是 class 的全域變數。\n#include class Entity{ public: static int x; }; int Entity::x; int main(){ Entity e; e.x = 1; std::cout \u003c\u003c e.x \u003c\u003c std::endl; Entity e2; e2.x = 3; // e.x 也變成 3 std::cout \u003c\u003c e.x \u003c\u003c std::endl; return 0; } 這些 static variable（或是 static function）是跟 class 綁在一起的，而不是 object。因此實務上要寫的話改成以下的方式會比較好，也比較直觀。\n#include class Entity{ public: static int x; static void print(){ std::cout \u003c\u003c x \u003c\u003c std::endl; } }; int Entity::x; int main(){ Entity e; // 甚至可以不需要這一行，因為 static member 跟 object 無關 Entity::x = 1; // 不要寫 e.x = 1 Entity::print(); // 不要寫 e.print() return 0; } 最後，static function 只能存取 static variables，畢竟 static 只跟 class 有關，跟 object 無關，要特別注意。\nOOP Encapsulation 封裝 把 data members 透過 member functions 來存取。\nclass person { private: int Weight; int Height; public: int get_Weight(){ return Weight; } int get_Height(){ return Height; } void set_Weight(int weight){ Weight = weight; } void set_Height(int height){ Height = height; } }; 在上面的例子中，為什麼不直接透過 person.Weight 來修改數值？\n假設這個數值必須要符合一定的條件，例如：體重必須大於 0，那麼可以這樣寫\nvoid set_Weight(int weight){ if (weight \u003e 0){ Weight = weight; } } 來達到我們要的目的。\n而直接修改 person.Weight，可能會修改成不符合條件的數值。\nAbstraction 抽象化 在使用程式的時候，讓使用者不必關心程式本身是如何執行的，只要讓使用者知道如何使用即可。\n例如 C++ 的 lower_bound, pow，我們不必知道他的原理，只要知道如何使用就好。\nInheritance 繼承 private, protected, public members #include class base { private: int pvt = 1; public: int get_private(){ return pvt; } }; class derived: public base { }; int main (){ derived d; std::cout \u003c\u003c d.get_private(); return 0; } 上面這段程式碼可以正常運作，但是如果改成\n#include class base { private: int pvt = 1; public: int get_private(){ return pvt; } }; class derived: public base { }; int main (){ derived d; std::cout \u003c\u003c d.pvt; // 改了這一行 return 0; } 就會出現 member \"base::pvt\" (declared at line 5) is inaccessible。\n原因就是 pvt 是 base class 的 private member，因此只能在 base class 中存取。若是要讓 pvt 在 derived class 也能被存取，要改成\nclass base { protected: // pivate 改成 protected int pct = 1; public: int get_protected(){ return pct; } }; protected 跟 private 的差異在於 derived class 能不能存取。protected 可以，而 private 不行。\nprivate, protected, public inheritance 接下來是 public, protected, private inheratence。\n如果使用 class derived: public base{};，那麼在 base class 中的 public member 在 derived class 還會是 public member，在 base class 中的 protected member 在 derived class 還會是 protected member。\n如果使用 class derived: protected base{};，那麼在 base class 中的 public member 以及 protected member 在 derived class 都會變成 protected member。\n如果使用 class derived: private base{};，那麼在 base class 中的 所有 member 在 derived class 都會變成 private member。\n更詳細的說明可以看這個網站 https://www.programiz.com/cpp-programming/public-protected-private-inheritance\ninheriting constructors 如果 base class 有 constructor 的話，那麼在 derived class 就要寫一個 constructor，並不會有 default constructor。\nclass base { private: int member; public: base(int Member){ member = Member; } }; class derived: public base { public: derived(int Member): base(Member){ } }; 在 C++11 中，可以使用 using 來繼承 constructor，這會繼承所有的 base class constructor。\nclass base { private: int member; public: base(int Member){ member = Member; } }; class derived: public base { using base::base; }; Polymorphism 多型 利用 base class 來對 derived class 進行操作。\n好處在於管理物件的時候，可以直接用共同的 base class 來管理，而不需要用個別的 derived class 一個一個處理。\n要注意的是，只能使用 base class 有的 member funcitons 來操作（如果 base class 跟 derived class 有名稱一樣的 function，也只會執行 base class 的 fucntion），如果想要在 derived class 進行 override，要在 base class 的 function 前面加上 virtual，並且可以在 derived class 的 function 後面加上 override 來增加可讀性以及方便除錯。\n如果 base class 有 pure virtual function 的話，會變成 abstract class（或是叫做 interface），沒辦法創造出此 class 的 object。而且 derived class 一定要 override，不然 derived class 也會變成 abstract class，可以藉此來強制derived class 進行 override。\n如果想要執行只在 derived class 的 function，可以使用 dynamic cast 來運行。\n#include class base { public: virtual void info(){ std::cout \u003c\u003c \"base class object\" \u003c\u003c std::endl; } // or we can write \"virtual void info() = 0;\" // set it to pure virtual function }; class derived: public base { public: void info() override { // void info() override 來增加可讀性以及方便除錯 std::cout \u003c\u003c \"derived class object\" \u003c\u003c std::endl; } }; int main (){ derived d; base *ptr = \u0026d; ptr-\u003einfo(); // derived class object base b; ptr = \u0026b; ptr-\u003einfo(); // base class object return 0; } 參考資料 https://openhome.cc/Gossip/CppGossip/ https://youtu.be/wN0x9eZLix4 https://www.programiz.com/cpp-programming/public-protected-private-inheritance The Cherno C++ series https://www.youtube.com/@TheCherno ","wordCount":"768","inLanguage":"en","datePublished":"2023-12-25T20:00:00+08:00","dateModified":"2023-12-25T20:00:00+08:00","author":{"@type":"Person","name":"cwHsueh"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/blog/posts/c++-notes/"},"publisher":{"@type":"Organization","name":"cwHsueh","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/blog/ accesskey=h title="cwHsueh (Alt + H)">cwHsueh</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://cwhsueh.com title=about><span>about</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=http://localhost:1313/blog/leetcode/ title=leetcode><span>leetcode</span></a></li><li><a href=http://localhost:1313/blog/tags/ title=tags><span>tags</span></a></li><li><a href=http://localhost:1313/blog/archives/ title=archive><span>archive</span></a></li><li><a href=http://localhost:1313/blog/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/blog/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/blog/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">C++ notes</h1><div class=post-meta><span title='2023-12-25 20:00:00 +0800 +0800'>December 25, 2023</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;768 words&nbsp;·&nbsp;cwHsueh</div></header><div class=post-content><p>這篇文章主要是給自己看的，因此寫的方法是以自己看懂為主，一些自己已經會的東西就不會寫得太詳細。</p><h2 id=source-code-to-machine-code>Source Code to Machine Code<a hidden class=anchor aria-hidden=true href=#source-code-to-machine-code>#</a></h2><p>source code to machine code 分成四個步驟：</p><ol><li>preprocessing<ul><li>處理 #，例如 #include</li><li>把 header file 複製到當前的檔案裡面</li></ul></li><li>compiling<ul><li>turn code into assembly</li></ul></li><li>assembling<ul><li>turn assembly into machine code, 0s and 1s</li></ul></li><li>linking<ul><li>把不同檔案的 machine code 接在一起</li></ul></li></ol><p>雖然說有四個步驟，但是其實會把這四個步驟叫做 compiling。</p><h2 id=command-line-arguments>Command Line Arguments<a hidden class=anchor aria-hidden=true href=#command-line-arguments>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span> <span class=kt>char</span> <span class=o>*</span><span class=n>argv</span><span class=p>[]){</span> 
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span> <span class=kt>char</span> <span class=o>**</span><span class=n>argv</span><span class=p>){</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>如果有一個 binary file 叫做 greet，並且在 terminal 輸入 <code>./greet Hello</code>，此時 <code>argc = 2, argv[0] = "./greet", argv[1] = "Hello"</code>。</p><p><code>echo $?</code> 會回傳來自 main funciton 的 int，也就是 error code。</p><h2 id=the-cherno-c-series>The Cherno C++ series<a hidden class=anchor aria-hidden=true href=#the-cherno-c-series>#</a></h2><h3 id=static>static<a hidden class=anchor aria-hidden=true href=#static>#</a></h3><p><a href=https://youtu.be/f3FVU-iwNuA>https://youtu.be/f3FVU-iwNuA</a><br><a href=https://youtu.be/V-BFlMrBtqQ>https://youtu.be/V-BFlMrBtqQ</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=c1>// static.cpp
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>static</span> <span class=kt>int</span> <span class=n>s_variable</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// main.cpp
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>s_variable</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>s_variable</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span> <span class=c1>// 3
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>static.cpp 中的 s_variable 只能被 static.cpp 中的東西看到，所以並不會有 linking error。<br>在命名 global variable 的時候要很小心，因為一旦命名，其他所有的檔案就不能有此變數，不然就要加上 static。</p><p>而 static 在 class 中則像是 class 的全域變數。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Entity</span><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=kt>int</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>Entity</span><span class=o>::</span><span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=n>Entity</span> <span class=n>e</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>e</span><span class=p>.</span><span class=n>x</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>e</span><span class=p>.</span><span class=n>x</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Entity</span> <span class=n>e2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>e2</span><span class=p>.</span><span class=n>x</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span> <span class=c1>// e.x 也變成 3
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>e</span><span class=p>.</span><span class=n>x</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>這些 static variable（或是 static function）是跟 class 綁在一起的，而不是 object。因此實務上要寫的話改成以下的方式會比較好，也比較直觀。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Entity</span><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=kt>int</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=kt>void</span> <span class=nf>print</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>x</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>Entity</span><span class=o>::</span><span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=n>Entity</span> <span class=n>e</span><span class=p>;</span> <span class=c1>// 甚至可以不需要這一行，因為 static member 跟 object 無關
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>Entity</span><span class=o>::</span><span class=n>x</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=c1>// 不要寫 e.x = 1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>Entity</span><span class=o>::</span><span class=n>print</span><span class=p>();</span> <span class=c1>// 不要寫 e.print()
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>最後，static function 只能存取 static variables，畢竟 static 只跟 class 有關，跟 object 無關，要特別注意。</p><h2 id=oop>OOP<a hidden class=anchor aria-hidden=true href=#oop>#</a></h2><h3 id=encapsulation-封裝>Encapsulation 封裝<a hidden class=anchor aria-hidden=true href=#encapsulation-封裝>#</a></h3><p>把 data members 透過 member functions 來存取。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=k>class</span> <span class=nc>person</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>Weight</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>Height</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>get_Weight</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Weight</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=nf>get_Height</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Height</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>set_Weight</span><span class=p>(</span><span class=kt>int</span> <span class=n>weight</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>Weight</span> <span class=o>=</span> <span class=n>weight</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>set_Height</span><span class=p>(</span><span class=kt>int</span> <span class=n>height</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>Height</span> <span class=o>=</span> <span class=n>height</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>在上面的例子中，為什麼不直接透過 <code>person.Weight</code> 來修改數值？<br>假設這個數值必須要符合一定的條件，例如：體重必須大於 0，那麼可以這樣寫</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=kt>void</span> <span class=nf>set_Weight</span><span class=p>(</span><span class=kt>int</span> <span class=n>weight</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>weight</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>Weight</span> <span class=o>=</span> <span class=n>weight</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>來達到我們要的目的。<br>而直接修改 <code>person.Weight</code>，可能會修改成不符合條件的數值。</p><h3 id=abstraction-抽象化>Abstraction 抽象化<a hidden class=anchor aria-hidden=true href=#abstraction-抽象化>#</a></h3><p>在使用程式的時候，讓使用者不必關心程式本身是如何執行的，只要讓使用者知道如何使用即可。<br>例如 C++ 的 <code>lower_bound, pow</code>，我們不必知道他的原理，只要知道如何使用就好。</p><h3 id=inheritance-繼承>Inheritance 繼承<a hidden class=anchor aria-hidden=true href=#inheritance-繼承>#</a></h3><h4 id=private-protected-public-members>private, protected, public members<a hidden class=anchor aria-hidden=true href=#private-protected-public-members>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>pvt</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>get_private</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>pvt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>derived</span><span class=o>:</span> <span class=k>public</span> <span class=n>base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span> <span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=n>derived</span> <span class=n>d</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>d</span><span class=p>.</span><span class=n>get_private</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>上面這段程式碼可以正常運作，但是如果改成</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>pvt</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>get_private</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>pvt</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>derived</span><span class=o>:</span> <span class=k>public</span> <span class=n>base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span> <span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=n>derived</span> <span class=n>d</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>d</span><span class=p>.</span><span class=n>pvt</span><span class=p>;</span> <span class=c1>// 改了這一行
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>就會出現 <code>member "base::pvt" (declared at line 5) is inaccessible</code>。<br>原因就是 <code>pvt</code> 是 base class 的 private member，因此只能在 base class 中存取。若是要讓 <code>pvt</code> 在 derived class 也能被存取，要改成</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=k>class</span> <span class=nc>base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>protected</span><span class=o>:</span> <span class=c1>// pivate 改成 protected
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=n>pct</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>get_protected</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>pct</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>protected 跟 private 的差異在於 derived class 能不能存取。protected 可以，而 private 不行。</p><h4 id=private-protected-public-inheritance>private, protected, public inheritance<a hidden class=anchor aria-hidden=true href=#private-protected-public-inheritance>#</a></h4><p>接下來是 public, protected, private inheratence。<br>如果使用 <code>class derived: public base{};</code>，那麼在 base class 中的 public member 在 derived class 還會是 public member，在 base class 中的 protected member 在 derived class 還會是 protected member。<br>如果使用 <code>class derived: protected base{};</code>，那麼在 base class 中的 public member 以及 protected member 在 derived class 都會變成 protected member。<br>如果使用 <code>class derived: private base{};</code>，那麼在 base class 中的 所有 member 在 derived class 都會變成 private member。</p><p>更詳細的說明可以看這個網站 <a href=https://www.programiz.com/cpp-programming/public-protected-private-inheritance>https://www.programiz.com/cpp-programming/public-protected-private-inheritance</a></p><h4 id=inheriting-constructors>inheriting constructors<a hidden class=anchor aria-hidden=true href=#inheriting-constructors>#</a></h4><p>如果 base class 有 constructor 的話，那麼在 derived class 就要寫一個 constructor，並不會有 default constructor。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=k>class</span> <span class=nc>base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>member</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>base</span><span class=p>(</span><span class=kt>int</span> <span class=n>Member</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>member</span> <span class=o>=</span> <span class=n>Member</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>derived</span><span class=o>:</span> <span class=k>public</span> <span class=n>base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>derived</span><span class=p>(</span><span class=kt>int</span> <span class=n>Member</span><span class=p>)</span><span class=o>:</span> <span class=n>base</span><span class=p>(</span><span class=n>Member</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>在 C++11 中，可以使用 <code>using</code> 來繼承 constructor，這會繼承所有的 base class constructor。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=k>class</span> <span class=nc>base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>private</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>member</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>base</span><span class=p>(</span><span class=kt>int</span> <span class=n>Member</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>member</span> <span class=o>=</span> <span class=n>Member</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>derived</span><span class=o>:</span> <span class=k>public</span> <span class=n>base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>using</span> <span class=n>base</span><span class=o>::</span><span class=n>base</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><h3 id=polymorphism-多型>Polymorphism 多型<a hidden class=anchor aria-hidden=true href=#polymorphism-多型>#</a></h3><p>利用 base class 來對 derived class 進行操作。<br>好處在於管理物件的時候，可以直接用共同的 base class 來管理，而不需要用個別的 derived class 一個一個處理。<br>要注意的是，只能使用 base class 有的 member funcitons 來操作（如果 base class 跟 derived class 有名稱一樣的 function，也只會執行 base class 的 fucntion），如果想要在 derived class 進行 override，要在 base class 的 function 前面加上 <code>virtual</code>，並且可以在 derived class 的 function 後面加上 <code>override</code> 來增加可讀性以及方便除錯。</p><p>如果 base class 有 pure virtual function 的話，會變成 abstract class（或是叫做 interface），沒辦法創造出此 class 的 object。而且 derived class 一定要 override，不然 derived class 也會變成 abstract class，可以藉此來強制derived class 進行 override。</p><p>如果想要執行只在 derived class 的 function，可以使用 dynamic cast 來運行。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=kt>void</span> <span class=n>info</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;base class object&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// or we can write &#34;virtual void info() = 0;&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// set it to pure virtual function
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>derived</span><span class=o>:</span> <span class=k>public</span> <span class=n>base</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>info</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span> <span class=c1>// void info() override 來增加可讀性以及方便除錯
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;derived class object&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span> <span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=n>derived</span> <span class=n>d</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>base</span> <span class=o>*</span><span class=n>ptr</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>d</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>ptr</span><span class=o>-&gt;</span><span class=n>info</span><span class=p>();</span> <span class=c1>// derived class object
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>base</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>ptr</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>ptr</span><span class=o>-&gt;</span><span class=n>info</span><span class=p>();</span> <span class=c1>// base class object
</span></span></span><span class=line><span class=cl><span class=c1></span>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=參考資料>參考資料<a hidden class=anchor aria-hidden=true href=#參考資料>#</a></h2><ol><li><a href=https://openhome.cc/Gossip/CppGossip/>https://openhome.cc/Gossip/CppGossip/</a></li><li><a href=https://youtu.be/wN0x9eZLix4>https://youtu.be/wN0x9eZLix4</a></li><li><a href=https://www.programiz.com/cpp-programming/public-protected-private-inheritance>https://www.programiz.com/cpp-programming/public-protected-private-inheritance</a></li><li>The Cherno C++ series <a href=https://www.youtube.com/@TheCherno>https://www.youtube.com/@TheCherno</a></li></ol></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=http://localhost:1313/blog/posts/c++-primer-plus/><span class=title>« Prev</span><br><span>C++ Primer Plus notes</span>
</a><a class=next href=http://localhost:1313/blog/posts/majority-voting-algorithm/><span class=title>Next »</span><br><span>Majority Voting Algorithm 多數投票算法</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/blog/>cwHsueh</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>